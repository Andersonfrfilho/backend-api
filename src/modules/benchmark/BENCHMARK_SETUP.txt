âœ… MÃ“DULO BENCHMARK CRIADO COM SUCESSO!

ğŸ“ ESTRUTURA COMPLETA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

src/modules/benchmark/
â”œâ”€â”€ ğŸ“„ benchmark.module.ts
â”‚   â””â”€â”€ Registra entities, services e controller
â”‚
â”œâ”€â”€ ğŸ“ domain/entities/
â”‚   â””â”€â”€ ğŸ“„ benchmark.entities.ts
â”‚       â”œâ”€â”€ BenchmarkUUIDv7Entity
â”‚       â”œâ”€â”€ BenchmarkNanoidEntity
â”‚       â””â”€â”€ BenchmarkSnowflakeEntity
â”‚
â”œâ”€â”€ ğŸ“ application/services/
â”‚   â””â”€â”€ ğŸ“„ id-strategy-benchmark.service.ts
â”‚       â”œâ”€â”€ benchmarkInsert()      â†’ 10k registros
â”‚       â”œâ”€â”€ benchmarkSelect()      â†’ 1000 limit queries
â”‚       â”œâ”€â”€ benchmarkUpdate()      â†’ 1k updates
â”‚       â”œâ”€â”€ benchmarkIndexSearch() â†’ buscas por Ã­ndice
â”‚       â”œâ”€â”€ benchmarkDiskUsage()   â†’ uso de disco
â”‚       â””â”€â”€ benchmarkAll()         â†’ todos os testes
â”‚
â”œâ”€â”€ ğŸ“ infrastructure/services/
â”‚   â””â”€â”€ ğŸ“„ snowflake-id-generator.service.ts
â”‚       â”œâ”€â”€ generate()              â†’ gera novo Snowflake ID
â”‚       â”œâ”€â”€ extractTimestamp()      â†’ extrai timestamp
â”‚       â”œâ”€â”€ extractDatacenterId()   â†’ extrai datacenter
â”‚       â”œâ”€â”€ extractWorkerId()       â†’ extrai worker
â”‚       â””â”€â”€ extractSequence()       â†’ extrai sequence
â”‚
â”œâ”€â”€ ğŸ“ presentation/controllers/
â”‚   â””â”€â”€ ğŸ“„ id-strategy-benchmark.controller.ts
â”‚       â”œâ”€â”€ POST /benchmark/insert
â”‚       â”œâ”€â”€ POST /benchmark/select
â”‚       â”œâ”€â”€ POST /benchmark/update
â”‚       â”œâ”€â”€ POST /benchmark/index-search
â”‚       â”œâ”€â”€ GET  /benchmark/disk-usage
â”‚       â”œâ”€â”€ GET  /benchmark/all
â”‚       â””â”€â”€ POST /benchmark/cleanup
â”‚
â””â”€â”€ ğŸ“„ README.md
    â””â”€â”€ DocumentaÃ§Ã£o do mÃ³dulo

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ—„ï¸ DATABASE TABLES CRIADAS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ benchmark_uuid_v7
  â””â”€â”€ id: uuid (gen_random_uuid_v7())
  â””â”€â”€ Ãndices: email, city, created_at

âœ“ benchmark_nanoid
  â””â”€â”€ id: varchar(21)
  â””â”€â”€ Ãndices: email, city, created_at

âœ“ benchmark_snowflake
  â””â”€â”€ id: bigint
  â””â”€â”€ Ãndices: email, city, created_at

Todas com mesma estrutura:
  - name: varchar(255)
  - email: varchar(255) [indexed]
  - age: integer
  - city: varchar(100) [indexed]
  - data: jsonb
  - created_at: timestamp [indexed]
  - updated_at: timestamp

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ ENDPOINTS DISPONÃVEIS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1ï¸âƒ£  INSERT BENCHMARK
    POST /benchmark/insert?count=10000
    â””â”€â”€ Insere 10k registros em cada tabela
    â””â”€â”€ Mede: registros/segundo

2ï¸âƒ£  SELECT BENCHMARK
    POST /benchmark/select?limit=1000
    â””â”€â”€ Executa 10 queries com LIMIT 1000
    â””â”€â”€ Mede: queries/segundo

3ï¸âƒ£  UPDATE BENCHMARK
    POST /benchmark/update?count=1000
    â””â”€â”€ Atualiza 1k registros
    â””â”€â”€ Mede: updates/segundo

4ï¸âƒ£  INDEX SEARCH BENCHMARK
    POST /benchmark/index-search?iterations=100
    â””â”€â”€ 100 buscas por Ã­ndice (city)
    â””â”€â”€ Mede: searches/segundo

5ï¸âƒ£  DISK USAGE BENCHMARK
    GET /benchmark/disk-usage
    â””â”€â”€ Tamanho total + Ã­ndices + per-record
    â””â”€â”€ Mede: MB + bits/registro

6ï¸âƒ£  BENCHMARK COMPLETO
    GET /benchmark/all?insertCount=10000&selectLimit=1000
    â””â”€â”€ Executa todos os 5 testes
    â””â”€â”€ Retorna recomendaÃ§Ãµes finais
    â””â”€â”€ âš ï¸  Demora ~5-10 minutos

7ï¸âƒ£  CLEANUP
    POST /benchmark/cleanup
    â””â”€â”€ Remove todos os dados de teste

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ PRÃ“XIMOS PASSOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Rodar migrations:
   npm run typeorm:migration:run

2. Iniciar servidor:
   npm run start:dev

3. Testar INSERT:
   curl -X POST http://localhost:3000/benchmark/insert?count=1000

4. Ver resultado e medir performance!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š PADRÃƒO DE RESPOSTA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{
  "message": "Insertados 10000 registros em cada tabela",
  "results": {
    "uuidV7": {
      "duration": 2450,          // millisegundos
      "recordsPerSecond": 4081,  // ğŸ“Š mÃ©trica principal
      "avgTimePerRecord": 0.25   // millisegundos/registro
    },
    "nanoid": {
      "duration": 3120,
      "recordsPerSecond": 3205,
      "avgTimePerRecord": 0.31
    },
    "snowflake": {
      "duration": 2890,
      "recordsPerSecond": 3460,
      "avgTimePerRecord": 0.29
    }
  },
  "winner": "uuidV7 foi 4081 registros/s"  // âœ… Vencedor auto-detectado
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ RECOMENDAÃ‡Ã•ES FINAIS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… UUID v7 (ATUAL - RECOMENDADO)
   â€¢ Melhor para INSERT
   â€¢ Sortable por timestamp
   â€¢ PadrÃ£o RFC 4122
   â€¢ Usado por: Google Cloud, PostgreSQL 15+

ğŸ“Œ Nanoid (Para URLs curtas)
   â€¢ 21 caracteres vs 36 (UUID)
   â€¢ URL-safe
   â€¢ Exemplo: V1StGXR_Z5j3eK7t4w9z

ğŸš€ Snowflake (Para distribuiÃ§Ã£o)
   â€¢ Discord-style
   â€¢ Suporta 31 datacenters Ã— 32 workers
   â€¢ Economiza ~27% espaÃ§o vs UUID

MANTÃ‰M UUID v7 para backend-api! âœ…

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
